# MindMap 项目 AGENTS.md

## ⚠️ 核心约定（必须遵守）

### 1. 文档优先原则

**所有设计必须通过文档沟通，用户确认后才能执行。**

```
正确流程：
用户: 设计一个 mindmap 软件
    ↓
Kimi: 创建需求文档_v1.md
    ↓
用户: 确认 / 提出修改意见
    ↓
Kimi: 更新文档_v2.md
    ↓
用户: 确认
    ↓
Kimi: 进入下一阶段（效果图/技术设计/编码）
```

**禁止行为：**
- ❌ 不写文档直接问用户选择题
- ❌ 不确认直接开始实现
- ❌ 口头沟通替代文档

### 2. 变更必须更新文档

任何需求变更、设计调整，必须：
1. 更新对应文档
2. 标注版本号（v1 → v2 → v3）
3. 在文档中记录变更历史

---

## 项目信息

| 项目 | 内容 |
|-----|------|
| 名称 | MindMap 思维导图软件 |
| 技术栈 | Rust 独立版本 + Qt 独立版本 |
| 开发阶段 | 效果图设计阶段 |

---

## 文档清单

| 文档 | 状态 | 说明 |
|-----|------|------|
| 需求文档_v1.md | ✅ 已创建 | 功能需求、技术栈、模块划分 |
| 效果图设计文档_v1.md | ✅ 已完成 | 设计风格、配色方案、4张效果图 |
| 效果图_01_主界面全貌.pen | ✅ 已完成 | 完整窗口布局 |
| 效果图_02_节点编辑状态.pen | ✅ 已完成 | 选中节点、编辑弹窗 |
| 效果图_03_右键菜单.pen | ✅ 已完成 | 上下文菜单、子菜单 |
| 效果图_04_多标签页.pen | ✅ 已完成 | 标签栏设计 |
| 技术设计文档_v1.md | ⏳ 待创建 | 确认效果图后创建 |

---

## 开发流程

```
阶段 1: 需求分析
    → 需求文档_v1.md
    → 用户确认
    
阶段 2: 效果图设计
    → 效果图设计文档_v1.md
    → 绘制效果图
    → 用户确认
    
阶段 3: 技术设计
    → 技术设计文档_v1.md
    → 用户确认
    
阶段 4: 编码实现
    → Rust 版本
    → Qt 版本
```

---

## 重要提醒

- 每次回复前先检查是否有待确认的文档
- 文档必须用版本号管理（v1, v2, v3...）
- 用户说"继续"时，检查当前阶段该做什么文档

## Pencil MCP 配置

### 安装检查

如果 Pencil MCP 无法使用，检查以下配置：

```bash
# 1. 检查 MCP 是否已添加
kimi mcp list

# 2. 如果未添加或连接失败，重新配置：
kimi mcp remove pencil
kimi mcp add --transport stdio pencil -- \
  ~/.vscode/extensions/highagency.pencildev-0.6.28/out/mcp-server-darwin-arm64 \
  -app visual_studio_code

# 3. 测试连接
kimi mcp test pencil
```

### 关键参数
- `-app visual_studio_code`：必须指定，指向 VS Code 应用
- 其他可用 app 值见 `~/.pencil/apps/` 目录

---

最后更新: 2026-02-28
